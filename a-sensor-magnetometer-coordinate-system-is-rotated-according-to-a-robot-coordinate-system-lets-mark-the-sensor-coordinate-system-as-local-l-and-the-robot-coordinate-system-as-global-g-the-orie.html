<!DOCTYPE html>
    <html lang="en">
    
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-PQPWWZGD1B"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-PQPWWZGD1B');
        </script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7833742603914548"
     crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous">
        <link rel="stylesheet" href="/assets/css/min/@ui.css">
        <link rel="shortcut icon" href="/assets/images/favicons/favicon.ico">
        <link rel="apple-touch-icon-precomposed" href="/assets/images/favicons/apple-touch-icon-152x152-precomposed.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicons/favicon-16x16.png">
        <link rel="manifest" href="/assets/images/favicons/site.webmanifest">
        <link rel="mask-icon" href="/assets/images/favicons/safari-pinned-tab.svg" color="#10106d">
        <meta name="msapplication-TileColor" content="#10106d">
        <meta name="msapplication-config" content="/assets/images/favicons/browserconfig.xml">
        <meta name="theme-color" content="#10106d">
        <link rel="canonical" href="https://vlavar.com/engineeringdb/a-sensor-magnetometer-coordinate-system-is-rotated-according-to-a-robot-coordinate-system-lets-mark-the-sensor-coordinate-system-as-local-l-and-the-robot-coordinate-system-as-global-g-the-orie" />
        <meta property="og:locale" content="en_US" />
        <meta property="og:type" content="article" />
        <meta property="og:site_name" content="Vlavar" />
        <meta property="article:publisher" content="admin@vlavar" />
       <title>A sensor (magnetometer) coordinate system is rotated according to a robot coordinate system. Lets mark the sensor coordinate system as local (L) and the robot coordinate system as global (G). The orientation of the sensor according to the robot is described by two rotations. Suppose that initially [solved] | Vlavar Engineering</title>
<meta property="og:title" content="A sensor (magnetometer) coordinate system is rotated according to a robot coordinate system. Lets mark the sensor coordinate system as local (L) and the robot coordinate system as global (G). The orientation of the sensor according to the robot is described by two rotations. Suppose that initially[solved!] | Vlavar Engineering" />
<meta name="description" content="Solution 1. Final orientation is described by the rotation matrix obtained from successive rotations where multiplication order is important."/>
<meta property="og:description" content="Solution 1. Final orientation is described by the rotation matrix obtained from successive rotations where multiplication order is important." />

<meta property="og:updated_time" content="2022-11-20T15:51:40+04:00" />
<meta name="twitter:description" content="Solution 1. Final orientation is described by the rotation matrix obtained from successive rotations where multiplication order is important." />
<meta name="twitter:title" content="A sensor (magnetometer) coordinate system is rotated according to a robot coordinate system. Lets mark the sensor coordinate system as local (L) and the robot coordinate system as global (G). The orientation of the sensor according to the robot is described by two rotations. Suppose that initially[solved!] | Vlavar Engineering" />

<meta property="article:published_time" content="2022-11-20T15:34:38+04:00" />
        <meta property="og:url" content="https://vlavar.com/engineeringdb/a-sensor-magnetometer-coordinate-system-is-rotated-according-to-a-robot-coordinate-system-lets-mark-the-sensor-coordinate-system-as-local-l-and-the-robot-coordinate-system-as-global-g-the-orie" />
        <meta property="article:author" content="admin@vlavar" />
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:site" content="admin@vlavar" />
        <meta name="twitter:creator" content="admin@vlavar" />
     
    </head>
    
    <body>
        <nav id="desktop" class="desktop">
            <div id="desktop-container" class="container">
                <h1 id="logo"><a href="/">Vlavar</a></h1>
                <div id="desktop-menu" class="menu">
                    <a href="/">Home</a>
                    <a id="search">Search</a>
                    <a href="/tour/1">Tour</a>
                    <a href="/contact-us">Contact Us</a>
                </div>
                <button id="burger-button" class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
    
            </div>
        </nav>
        <nav id="mobile-navbar" class="mobile-nav">
            <div class="one text-fade"><a class="nav-link" href="/">Home</a></div>
            <div class="two text-fade"><a class="nav-link" id="search-mobile">Search</a></div>
            <div class="three text-fade"><a class="nav-link" href="/tour/1">Tour</a></div>
            <div class="four text-fade"><a class="nav-link" href="/contact-us">COntact Us</a></div>
        </nav>
    
        <div id="container" class="container-items tour">
            <div id="searchbox" class="searchbox">
                <div class="search">
                    <div class="icon"></div>
                    <form class="form">
                        <div class="input">
                        <input type="text" id="x" placeholder="Find solutions to engineering problems " autocomplete="off" >

                        </div>
                    </form>
                </div>
            </div>
            <div class="items question-block"> <span class="question">Guest Question. </span>
            <p class="blog">A sensor (magnetometer) coordinate system is rotated according to a robot coordinate system. Lets mark the sensor coordinate system as local (L) and the robot coordinate system as global (G). The orientation of the sensor according to the robot is described by two rotations. Suppose that initially (L) is aligned to (G) then rotating (L) around x-axis for <span class="tex-text">\(\alpha_{x}\)</span> = 90 degree and finally around new y-axis for <span class="tex-text">\(\alpha_{y}\)</span> = 45 degree. Answer the following: 1. What is the orientation of the sensor expressed by the DCM (<span class="tex-text">\(R_{G}^{L}\)</span>) according to robot coordinates? 2. Determine Euler angles (notation 3–2–1) for this transformation. 3. Determine quaternion <span class="tex-text">\(q_{G}^{L}\)</span> that describes this transformation. 4. The magnetometer measures direction vector v =<span class="tex-text">\([0,0,1]^{T}\)</span> of the magnetic field. What is the presentation of this vector in robot coordinates?</p>      
    <!-- end -->
            </div>
    
            <div class="items blog-solution">
                <div class="admin"><span>Admin</span> <svg class="verified-badge" xmlns="http://www.w3.org/2000/svg"
                        version="1.1" viewBox="0,0,24,24">
                        <path
                            d="M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5s-2.816.917-3.437 2.25c-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .494.083.964.237 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z"
                            fill="#1da1f2" />
                    </svg> </div>
    
                <div class="solution">Solution</div>
    
            </div>
    
            <div class="items answer-block">
                <p class="blog">
<strong>Solution</strong></p>
 <p class="blog">
1. Final orientation is described by the rotation matrix obtained from<br /> successive rotations where multiplication order is important.</p>
 <span class="tex-text">\(\begin{aligned}R_{G}^{L} &amp;=R_{y}\left(\alpha_{y}\right) R_{x}\left(\alpha_{x}\right) \\&amp;=\left[\begin{array}{ccc}\cos \left(\alpha_{y}\right) &amp; 0 &amp; -\sin \left(\alpha_{y}\right) \\0 &amp; 1 &amp; 0 \\\sin \left(\alpha_{y}\right) &amp; 0 &amp; \cos \left(\alpha_{y}\right)\end{array}\right]\left[\begin{array}{ccc}1 &amp; 0 &amp; 0 \\0 &amp; \cos \left(\alpha_{x}\right) &amp; \sin \left(\alpha_{x}\right) \\0 &amp; -\sin \left(\alpha_{x}\right) &amp; \cos \left(\alpha_{x}\right)\end{array}\right] \\&amp;=\left[\begin{array}{ccc}0.7071 &amp; 0.7071 &amp; 0 \\0 &amp; 0 &amp; 1 \\0.7071 &amp; -0.7071 &amp; 0\end{array}\right]\end{aligned}\)</span> <p class="blog">
&nbsp;</p>
 <p class="blog">
Rows of matrix <span class="tex-text">\(R_{G}^{L}\)</span> are components of the sensor axis expressed in robot coordinates, which is seen from a graphical presentation of this rotation.</p>
 <p class="blog">
2. Euler angles for 3–2–1 notation are calculated from matrix<br /> R = <span class="tex-text">\(R_{G}^{L}\)</span></p>
 <p class="blog">
&nbsp;</p>
 <span class="tex-text">\(\begin{aligned}\varphi &amp;=\arctan \left(\frac{R_{23}}{R_{33}}\right)=90 \text { degree } \\\theta &amp;=-\arcsin \left(R_{13}\right)=-0 \text { degree } \\\psi &amp;=\arctan \left(\frac{R_{12}}{R_{11}}\right)=45 \text { degree }\end{aligned}\)</span> <p class="blog">
&nbsp;</p>
 <p class="blog">
where the rotation matrix is obtained by <span class="tex-text">\(R_{G}^{L}=R_{x}(\varphi) R_{y}(\theta) R_{z}(\psi)\)</span> and<br /> where elementary rotations<span class="tex-text">\(R_{x}(\varphi)\)</span>, <span class="tex-text">\(R_{y}(\theta)\)</span>, and <span class="tex-text">\(R_{z}(\psi)\)</span> are defined in<br /> Eq. (5.5).</p>
 <span class="tex-text">\(R_{z}(\psi)=\left[\begin{array}{ccc}\cos (\psi) &amp; \sin (\psi) &amp; 0 \\-\sin (\psi) &amp; \cos (\psi) &amp; 0 \\0 &amp; 0 &amp; 1\end{array}\right]\)</span> <p class="blog">
&nbsp;</p>
 <p class="blog">
3. Quaternion <span class="tex-text">\(q_{G}^{L}\)</span> is obtained by the product of quaternions for successive rotations:</p>
 <span class="tex-text">\(q_{G}^{L}=q_{x} \circ q_{y}\)</span> <p class="blog">
where <span class="tex-text">\(q_{x}\)</span> is according to Eq. (5.10) defined by rotation angle <span class="tex-text">\(\Delta \varphi_{x}\)</span> = 90<br /> degree around rotation axis <span class="tex-text">\(e_{x}\)</span> = <span class="tex-text">\([1,0,0]^{T}\)</span> and <span class="tex-text">\(q_{y}\)</span> with rotation angle<br /> <span class="tex-text">\(\Delta \varphi_{y}\)</span> = 45 degree around rotation axis <span class="tex-text">\(e_{y}\)</span> =<span class="tex-text">\([0,1,0]^{T}\)</span></p>
 <p class="blog">
&nbsp;</p>
 <span class="tex-text">\(\begin{aligned}&amp;q_{0}=\cos \Delta \varphi / 2 \\&amp;q_{1}=e_{1} \sin \Delta \varphi / 2 \\&amp;q_{2}=e_{2} \sin \Delta \varphi / 2 \\&amp;q_{3}=e_{3} \sin \Delta \varphi / 2\end{aligned}\)</span> <p class="blog">
&nbsp;</p>
 <span class="tex-text">\(\begin{gathered}q_{x}=\left[\begin{array}{c}\cos \Delta \varphi_{x} / 2 \\e_{x_{1}} \sin \Delta \varphi_{x} / 2 \\e_{x_{2}} \sin \Delta \varphi_{x} / 2 \\e_{x_{3}} \sin \Delta \varphi_{x} / 2\end{array}\right]=\left[\begin{array}{c}0.7071 \\0.7071 \\0 \\0\end{array}\right] \\q_{y}=\left[\begin{array}{c}\cos \Delta \varphi_{z} / 2 \\e_{y_{1}} \sin \Delta \varphi_{y} / 2 \\e_{y_{2}} \sin \Delta \varphi_{y} / 2 \\e_{y_{3}} \sin \Delta \varphi_{y} / 2\end{array}\right]=\left[\begin{array}{c}0.9239 \\0 \\0.3827 \\0\end{array}\right]\end{gathered}\)</span> <p class="blog">
&nbsp;</p>
 <p class="blog">
The final quaternion (see quaternion product definition in Eq. 5.17)<br /> reads</p>
 <p class="blog">
&nbsp;</p>
 <span class="tex-text">\(\left[\begin{array}{l}q_{0}^{\prime \prime} \\q_{1}^{\prime \prime} \\q_{2}^{\prime \prime} \\q_{3}^{\prime \prime}\end{array}\right]=\left[\begin{array}{cccc}q_{0} &amp; -q_{1} &amp; -q_{2} &amp; -q_{3} \\q_{1} &amp; q_{0} &amp; q_{3} &amp; -q_{2} \\q_{2} &amp; -q_{3} &amp; q_{0} &amp; q_{1} \\q_{3} &amp; q_{2} &amp; -q_{1} &amp; q_{0}\end{array}\right]\left[\begin{array}{l}q_{0}^{\prime} \\q_{1}^{\prime} \\q_{2}^{\prime} \\q_{3}^{\prime}\end{array}\right]\)</span> <p class="blog">
&nbsp;</p>
 <span class="tex-text">\(q_{ G }^{L}=q_{x} \circ q_{y}=\left[\begin{array}{l}0.6533 \\0.6533 \\0.2706 \\0.2706\end{array}\right]\)</span> <p class="blog">
&nbsp;</p>
 <p class="blog">
which suits to the rotation angle <span class="tex-text">\(\Delta \varphi\)</span> = 2 arccos(<span class="tex-text">\(q_{0}\)</span>) = 2 arccos(0.6533) = 98.41 degree around the rotation axis e = <span class="tex-text">\(\frac{1}{\sin \frac{\Delta \varphi}{2}}\left[q_{1}, q_{2}, q_{3}\right]^{T}=[0.8630,0.3574,0.3574]^{T}\)</span></p>
 <p class="blog">
&nbsp;</p>
 <p class="blog">
4. The measured direction vector <span class="tex-text">\(v_{L}=[0,0,1]^{T}\)</span> is in robot coordinates:</p>
 <p class="blog">
&nbsp;</p>
 <span class="tex-text">\(v_{G}=R_{L}^{G} v_{L}=[0.70711,-0.70711,0]^{T}\)</span> <p class="blog">
where <span class="tex-text">\(R_{L}^{G}=\left(R_{G}^{L}\right)^{-1}=R_{G}^{L}\)</span></p>
 <p class="blog">
The same is obtained by quaternions where the vector after rotation<br /> is</p>
 <span class="tex-text">\(q_{v_{G}}=\left(q_{L}^{G}\right)^{-1} \circ q_{v_{L}} \circ q_{L}^{G}\)</span> <p class="blog">
where <span class="tex-text">\(q_{v_{L}}=\left[0, v_{L}^{T}\right]^{T} \text { and } q_{L}^{G}=\left(q_{G}^{L}\right)^{-1}\)</span> (see Eq. 5.9). Products of quaternions are defined in Eq. (5.17). The solution is</p>
 <p class="blog">
&nbsp;</p>
 <span class="tex-text">\(q^{-1}=\frac{q^{*}}{\|q\|^{2}}\)</span> <p class="blog">
&nbsp;</p>
 <span class="tex-text">\(\left[\begin{array}{l}q_{0}^{\prime \prime} \\q_{1}^{\prime \prime} \\q_{2}^{\prime \prime} \\q_{3}^{\prime \prime}\end{array}\right]=\left[\begin{array}{cccc}q_{0} &amp; -q_{1} &amp; -q_{2} &amp; -q_{3} \\q_{1} &amp; q_{0} &amp; q_{3} &amp; -q_{2} \\q_{2} &amp; -q_{3} &amp; q_{0} &amp; q_{1} \\q_{3} &amp; q_{2} &amp; -q_{1} &amp; q_{0}\end{array}\right]\left[\begin{array}{l}q_{0}^{\prime} \\q_{1}^{\prime} \\q_{2}^{\prime} \\q_{3}^{\prime}\end{array}\right]\)</span> <p class="blog">
&nbsp;</p>
 <span class="tex-text">\(q_{v_{C}}=\left[\begin{array}{l}0.6533 \\0.6533 \\0.2706 \\0.2706\end{array}\right] \circ\left[\begin{array}{l}0 \\0 \\0 \\1\end{array}\right] \circ\left[\begin{array}{c}0.6533 \\-0.6533 \\-0.2706 \\-0.2706\end{array}\right]=\left[\begin{array}{c}0 \\0.7071 \\-0.7071 \\0\end{array}\right]\)</span> <p class="blog">
which is vector <span class="tex-text">\(v_{G}=[0.7071,-0.7071,0]^{T}\)</span> (only the vector part of quaternion is considered).</p>
 <p class="blog">
&nbsp;</p>
 
    
          <!-- end -->
            </div>
        </div>
    
    
        <footer class="footer-bg footer-slct">
            <div class="footer-top">
                <a href="/tos">terms</a>
                <a href="/privacy">privacy</a>
                <a href="/contact-us">contact us</a>
            </div>
            <div class="footer-bottom">
                &copy; 2022 Vlavar Inc. All Rights Reserved.
            </div>
        </footer>    
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js" integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script>
        <script src="/assets/js/min/client-ui.js"></script>
    </body>
    
    </html>